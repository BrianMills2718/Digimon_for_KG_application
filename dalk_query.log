####################################################################################################
 _____ _____ _____ _____ __  __  ____  _   _ 
|  __ \_   _/ ____|_   _|  \/  |/ __ \| \ | |
| |  | || || |  __  | | | \  / | |  | |  \| |
| |  | || || | |_ | | | | |\/| | |  | | . ` |
| |__| || || |__| |_| |_| |  | | |__| | |\  |
|_____/_____\_____|_____|_|  |_|\____/|_| \_|
                                             
                                             

╔════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ Welcome to DIGIMON: Deep Analysis of Graph-Based RAG Systems.                                          ║
║                                                                                                        ║
║ Unlock advanced insights with our comprehensive tool for evaluating and optimizing RAG models.         ║
║                                                                                                        ║
║ You can freely combine any graph-based RAG algorithms you desire. We hope this will be helpful to you! ║
╚════════════════════════════════════════════════════════════════════════════════════════════════════════╝
####################################################################################################
2025-05-20 04:51:39.156 | INFO     | __main__:handle_query_mode:119 - Starting 'query' mode for dataset: MySampleTexts...
2025-05-20 04:51:39.156 | INFO     | __main__:handle_query_mode:120 - Question: What were the key causes of the American Revolution?
2025-05-20 04:51:39.156 | INFO     | __main__:handle_query_mode:124 - Attempting to setup GraphRAG for querying (loading artifacts)...
2025-05-20 04:51:39.156 | INFO     | Core.GraphRAG:setup_for_querying:263 - --- Starting Artifact Loading Process for test ---
2025-05-20 04:51:39.156 | INFO     | Core.Storage.ChunkKVStorage:load_chunk:121 - Attempting to load chunk data from: ./results/MySampleTexts/er_graph/chunk_storage_chunk_data_idx.pkl and ./results/MySampleTexts/er_graph/chunk_storage_chunk_data_key.pkl
2025-05-20 04:51:39.157 | INFO     | Core.Storage.ChunkKVStorage:load_chunk:134 - Successfully loaded chunk data (idx and key) from: ./results/MySampleTexts/er_graph/chunk_storage_chunk_data_idx.pkl and ./results/MySampleTexts/er_graph/chunk_storage_chunk_data_key.pkl
2025-05-20 04:51:39.157 | INFO     | Core.GraphRAG:setup_for_querying:268 - Chunks loaded successfully.
2025-05-20 04:51:39.157 | INFO     | Core.Graph.BaseGraph:load_persisted_graph:32 - Attempting to load persisted graph via NetworkXStorage.load_graph(force=False)
2025-05-20 04:51:39.157 | INFO     | Core.Storage.NetworkXStorage:load_nx_graph:33 - Attempting to load the graph from: ./results/MySampleTexts/er_graph/graph_storage_nx_data.graphml
2025-05-20 04:51:39.164 | INFO     | Core.Storage.NetworkXStorage:load_nx_graph:37 - Successfully loaded graph from: ./results/MySampleTexts/er_graph/graph_storage_nx_data.graphml with 320 nodes and 208 edges
2025-05-20 04:51:39.164 | INFO     | Core.GraphRAG:setup_for_querying:273 - Graph loaded successfully.
2025-05-20 04:51:40.745 | INFO     | Core.GraphRAG:setup_for_querying:279 - Entities VDB loaded. Index object: <llama_index.core.indices.vector_store.base.VectorStoreIndex object at 0x7f9bd8e299c0>
2025-05-20 04:51:40.745 | INFO     | Core.GraphRAG:_build_retriever_context:151 - Building retriever context for the current execution
2025-05-20 04:51:40.745 | INFO     | Core.GraphRAG:setup_for_querying:330 - --- Artifact Loading Process for test Completed ---
2025-05-20 04:51:40.745 | INFO     | Core.GraphRAG:query:343 - Processing query: 'What were the key causes of the American Revolution?'
2025-05-20 04:51:41.384 | INFO     | Core.Common.CostManager:update_cost:57 - Total running cost: $0.000 | Max budget: $10.000 | Current cost: $0.000, prompt_tokens: 197, completion_tokens: 10
2025-05-20 04:51:42.747 | INFO     | Core.Common.CostManager:update_cost:57 - Total running cost: $0.001 | Max budget: $10.000 | Current cost: $0.000, prompt_tokens: 137, completion_tokens: 66
Traceback (most recent call last):
  File "/home/brian/digimon/main.py", line 206, in <module>
    asyncio.run(main())
  File "/home/brian/miniconda3/envs/digimon/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/home/brian/miniconda3/envs/digimon/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/brian/digimon/main.py", line 201, in main
    await handle_query_mode(opt, args.dataset_name, args.question, digimon)
  File "/home/brian/digimon/main.py", line 127, in handle_query_mode
    answer = await graphrag_instance.query(question_str)
  File "/home/brian/digimon/Core/GraphRAG.py", line 344, in query
    response = await self.querier_internal.query(query_text)
  File "/home/brian/digimon/Core/Query/DalkQuery.py", line 61, in query
    context = await self._retrieve_relevant_contexts(query)
  File "/home/brian/digimon/Core/Query/DalkQuery.py", line 53, in _retrieve_relevant_contexts
    neis = await self._select_most_relative_neis(
  File "/home/brian/digimon/Core/Query/DalkQuery.py", line 26, in _select_most_relative_neis
    nei_str_list = ["->".join([e["src_id"], e["content"], e["tgt_id"]])
  File "/home/brian/digimon/Core/Query/DalkQuery.py", line 26, in <listcomp>
    nei_str_list = ["->".join([e["src_id"], e["content"], e["tgt_id"]])
KeyError: 'content'
